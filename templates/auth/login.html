{% extends 'base.html' %}
{% block title %}Login — PhishShield AI{% endblock %}

{% block content %}
<div style="min-height:calc(100vh - 64px); display:flex; align-items:center; justify-content:center; padding:2rem 1rem;">
  <div style="width:100%; max-width:420px;">

    <!-- Logo -->
    <div class="text-center animate-in" style="margin-bottom:2rem;">
      <div style="display:inline-flex; align-items:center; justify-content:center; width:72px; height:72px; border-radius:20px; background:rgba(0,217,255,0.08); border:1px solid rgba(0,217,255,0.2); margin-bottom:1rem; box-shadow:0 0 40px rgba(0,217,255,0.2);">
        <svg width="40" height="40" viewBox="0 0 28 28" fill="none" style="filter:drop-shadow(0 0 10px rgba(0,217,255,0.8))">
          <path d="M14 2L4 7V14C4 19.5 8.5 24.6 14 26C19.5 24.6 24 19.5 24 14V7L14 2Z"
                fill="rgba(0,217,255,0.2)" stroke="#00D9FF" stroke-width="1.5"/>
          <path d="M10 14L12.5 16.5L18 11" stroke="#00D9FF" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <h1 style="font-size:1.75rem; font-weight:800; color:var(--text-primary); letter-spacing:-0.02em;">
        PhishShield <span style="color:var(--neon-blue); animation:glowPulse 3s infinite;">AI</span>
      </h1>
      <p class="text-muted" style="font-size:0.9rem; margin-top:0.4rem;">Protect yourself from phishing attacks</p>
    </div>

    <!-- Card -->
    <div class="card card-glow animate-in-delay-1" style="border-color:rgba(0,217,255,0.15);">
      <h2 style="font-size:1.2rem; font-weight:700; margin-bottom:1.5rem; color:var(--text-primary);">
        Sign In
      </h2>
      <form method="POST" action="{{ url_for('auth.login') }}" novalidate>
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

        <div class="form-group">
          <label class="form-label" for="email">Email Address</label>
          <div class="input-wrapper">
            <span class="input-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
            </span>
            <input type="email" class="form-control" id="email" name="email"
                   placeholder="you@university.edu" required autocomplete="email" />
          </div>
        </div>

        <div class="form-group">
          <div class="flex-between" style="margin-bottom:0.45rem;">
            <label class="form-label" for="password" style="margin-bottom:0;">Password</label>
            <a href="{{ url_for('auth.forgot_password') }}" style="font-size:0.8rem; color:var(--neon-blue); text-decoration:none; opacity:0.8;">Forgot password?</a>
          </div>
          <div class="input-wrapper">
            <span class="input-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
            </span>
            <input type="password" class="form-control" id="password" name="password"
                   placeholder="••••••••" required autocomplete="current-password" />
            <button type="button" onclick="togglePassword('password', this)"
                    style="position:absolute;right:0.9rem;top:50%;transform:translateY(-50%);background:none;border:none;color:var(--text-muted);cursor:pointer;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
            </button>
          </div>
        </div>

        <div style="display:flex; align-items:center; gap:0.5rem; margin-bottom:1.5rem;">
          <input type="checkbox" id="remember" name="remember"
                 style="width:16px; height:16px; accent-color:var(--neon-blue); cursor:pointer;" />
          <label for="remember" style="font-size:0.875rem; color:var(--text-muted); cursor:pointer;">Remember me for 30 days</label>
        </div>

        <button type="submit" class="btn btn-primary btn-block" id="login-btn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"/><polyline points="10 17 15 12 10 7"/><line x1="15" y1="12" x2="3" y2="12"/></svg>
          Sign In
        </button>
      </form>
    </div>

    <p class="text-center text-muted animate-in-delay-2" style="margin-top:1.25rem; font-size:0.875rem;">
      New to PhishShield?
      <a href="{{ url_for('auth.register') }}" style="color:var(--neon-blue); text-decoration:none; font-weight:600;">Create account →</a>
    </p>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
function togglePassword(fieldId, btn) {
  const field = document.getElementById(fieldId);
  field.type = field.type === 'password' ? 'text' : 'password';
}
document.getElementById('login-btn')?.addEventListener('click', function() {
  const btn = this;
  setTimeout(() => {
    btn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="animation:spin 1s linear infinite"><path d="M21 12a9 9 0 1 1-6.219-8.56"/></svg> Signing in…';
    btn.disabled = true;
  }, 50);
});
</script>
{% endblock %}
